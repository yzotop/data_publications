---
tags:
  - data
data_type:
  - AB tests
link: https://habr.com/ru/companies/ozontech/articles/689052/
source: habr
author: Ozon
ab_type: AB_Platform
company: Ozon
---
–û–¥–∏–Ω –∏–∑ –≤–∞–∂–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∫–∞–∫ –≤ –Ω–∞—à–µ–π –∂–∏–∑–Ω–∏, —Ç–∞–∫ –∏ –≤ –±–∏–∑–Ω–µ—Å–µ, –∏ –≤ IT ‚Äî –≤–æ–ø—Ä–æ—Å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ª–∏ –º—ã –ø–ª–∞–Ω–∏—Ä—É–µ–º –Ω–∞—à–µ –≤—Ä–µ–º—è, —Ç–µ –ª–∏ –∑–∞–¥–∞—á–∏ —Ä–µ—à–∞–µ—Ç –±–∏–∑–Ω–µ—Å, —Ç–æ—Ç –ª–∏ –∫–æ–¥ –º—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º? –ß—Ç–æ–±—ã –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —ç—Ç–∏ –≤–æ–ø—Ä–æ—Å—ã,¬†**—Ä–µ–∑—É–ª—å—Ç–∞—Ç**¬†–¥–æ–ª–∂–µ–Ω –æ–±–ª–∞–¥–∞—Ç—å¬†**–≥–ª–∞–≤–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏–µ–º**¬†‚Äî¬†**–∏–∑–º–µ—Ä–∏–º–æ—Å—Ç—å**.¬†–ò–∑–º–µ—Ä–∏–º–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–æ–≤—ã—Ö —Ñ–∏—á –¥–ª—è –±–∏–∑–Ω–µ—Å–∞ –∏ IT –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç¬†**–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞**¬†**–ê/B-—Ç–µ—Å—Ç–æ–≤.**¬†–û —Ç–æ–º, –∫–∞–∫ –µ—ë –º–æ–∂–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å, –≤—ã–¥–µ—Ä–∂–∏–≤–∞—Ç—å –±–æ–ª—å—à–æ–π RPS –∏ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ¬†~~–æ–±–ª–∞–∂–∞—Ç—å—Å—è~~¬†—É—Ä–æ–Ω–∏—Ç—å –ø—Ä–æ–¥, —è —Ä–∞—Å—Å–∫–∞–∂—É –≤ —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ.¬†

–í –∫–æ–Ω—Ü–µ —Å—Ç–∞—Ç—å–∏ –≤—ã —É–∑–Ω–∞–µ—Ç–µ, –∫–∞–∫ –º—ã –∑–∞–¥–µ—Ç–µ–∫—Ç–∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã¬†–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ—Ç–æ—Ä—ã—Ö –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤–ª–∏—è–ª–∞ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –≤—Å–µ–≥–æ Ozon.¬†

![](https://habrastorage.org/r/w780q1/getpro/habr/upload_files/ce9/1b3/c04/ce91b3c0444c73dd1278857cd7b934e8.jpg)

## –ë–µ–∑ –ê/B, –∫–∞–∫ –∏–∑–º–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –•–ó¬†

–ü—Ä–∏–≤–µ–¥—ë–º –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –∏ –æ—Ç—á–∞—è–Ω–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –ê/B-—Ç–µ—Å—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å, –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–π –∫–∞–∫ IT, —Ç–∞–∫ –∏ –±–∏–∑–Ω–µ—Å:¬†¬†

‚Äî –ù–∞ —Ñ–∏–≥–∞ –º—ã —É–ø–∞—Ä—ã–≤–∞–µ–º—Å—è —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞?¬†

–∏–ª–∏¬†¬†

‚Äî –ö–∞–∫ —Å–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥–µ–Ω—å–≥–∏?¬†¬†

–ß—Ç–æ–±—ã –æ—Ç–≤–µ—Ç–∏—Ç—å, –º—ã –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å —É—Ö—É–¥—à–∞—é—â–∏–π —Ç–µ—Å—Ç ‚Äî –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—é —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–∞–π—Ç–∞ (—Å–ª–∞–±–æ—É–º–∏–µ –∏ –æ—Ç–≤–∞–≥–∞) ‚Äî –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —Ä–µ–∞–ª—å–Ω–æ –ª–∏ –ø—Ä–æ—Å—è–¥—É—Ç –¥–µ–Ω–µ–∂–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏.¬†¬†

–°—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–µ.¬†

–î–∞–≤–∞–π—Ç–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ –º—ã –¥–µ–ª–∞–µ–º —Ñ–∏—á—É, –≤ –∫–æ—Ç–æ—Ä–æ–π, –∫ –ø—Ä–∏–º–µ—Ä—É, –Ω–∞ 100 –º—Å¬†**–∑–∞–º–µ–¥–ª—è–µ–º**¬†–≤–µ—Å—å —Å–∞–π—Ç, –∏ —Ö–æ—Ç–∏–º –∏–∑–º–µ—Ä–∏—Ç—å, –∫–∞–∫ —ç—Ç–æ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ –Ω–∞—à GMV (–æ–±–æ—Ä–æ—Ç). –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –≤–∞—Ä–∏–∞–Ω—Ç: –º—ã –µ—ë –ø—Ä–æ—Å—Ç–æ –≤—ã–∫–∞—Ç—ã–≤–∞–µ–º –≤ –ø—Ä–æ–¥ –∏ —Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –º–µ–Ω—è—é—Ç—Å—è –º–µ—Ç—Ä–∏–∫–∏.¬†

#### –û–∂–∏–¥–∞–Ω–∏–µ¬†

–ö–∞–∫ —Ç–æ–ª—å–∫–æ –º—ã –≤–∫–ª—é—á–∏–º –Ω–∞—à—É —Ñ–∏—á—É, –ø—Ä–æ—Å—è–¥—É—Ç –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏:¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/3d4/9c9/352/3d49c9352dc134990087574bb3b90046.png)

#### –†–µ–∞–ª—å–Ω–æ—Å—Ç—å¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/420/548/3ac/4205483ac35689dda0de3486c14981a1.png)

–ú–µ—Ç—Ä–∏–∫–∏ –ø–æ—à–ª–∏ –≤–≤–µ—Ä—Ö! ¬†

![](https://habrastorage.org/r/w780q1/getpro/habr/upload_files/1b8/5c0/197/1b85c019733d8da2c20f6800bb66bd47.jpg)

–í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ—Å—Ç–æ –Ω–∞—Å—Ç—É–ø–∏–ª –≤—ã—Å–æ–∫–∏–π —Å–µ–∑–æ–Ω, –∏ –≤—ã—Ä—É—á–∫–∞ –∑–∞ —Å—á—ë—Ç —Ä–∞—Å–ø—Ä–æ–¥–∞–∂ —Å—Ç–∞–ª–∞ –±–æ–ª—å—à–µ. –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, –ø–æ–≤–ª–∏—è–ª–æ –ª–∏ –Ω–∞ —ç—Ç–æ –Ω–∞—à–µ –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ.¬†

–ß—Ç–æ –∂–µ –¥–µ–ª–∞—Ç—å? –ö–∞–∫ –∏–∑–º–µ—Ä–∏—Ç—å? –ù–∞ –ø–æ–º–æ—â—å –ø—Ä–∏—Ö–æ–¥–∏—Ç –∫–æ–º–∞–Ω–¥–∞ –ê/B-—Ç–µ—Å—Ç–æ–≤ —Å –¥–µ–≤–∏–∑–æ–º:¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/f62/edc/d47/f62edcd476ceefa4edd9d18ca7693084.png)

–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ê/B-—Ç–µ—Å—Ç ‚Äî —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω—É–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å (—Å–ø–ª–∏—Ç–æ–≤–∞—Ç—å) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –¥–≤–µ –≥—Ä—É–ø–ø—ã. –ü–µ—Ä–≤–æ–π –≥—Ä—É–ø–ø–µ –≤–∫–ª—é—á–∞—Ç—å –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ (—Ç–µ—Å—Ç–æ–≤–∞—è –≥—Ä—É–ø–ø–∞ / —Å–ª–∞–±–æ—É–º–∏–µ –∏ –æ—Ç–≤–∞–≥–∞), –≤—Ç–æ—Ä–æ–π –≥—Ä—É–ø–ø–µ ‚Äî –Ω–µ –∑–∞–º–µ–¥–ª—è—Ç—å (–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è –≥—Ä—É–ø–ø–∞).¬†¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/9f1/c40/114/9f1c40114e27014b6d70dcf35720b355.png)

–ù–µ –∑–∞–±—ã–≤–∞–µ–º —Ç–∞–∫–∂–µ –¥–æ –∑–∞–ø—É—Å–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏ –∏ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞. –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –º—ã –º–æ–∂–µ–º —Å—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Ç–µ—Å—Ç–æ–≤–æ–π –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π –≥—Ä—É–ø–ø–∞—Ö –∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –±—ã–ª–∏ –ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏ –∑–Ω–∞—á–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–ª–∏ –Ω–µ—Ç. Profit! üòé¬†

–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç —Å –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ–º —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–µ—Å–µ–Ω —Ç–µ–º, —á—Ç–æ, –∑–∞–º–µ–¥–ª—è—è –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –≤—Ä–µ–º—è –Ω–∞—à —Å–∞–π—Ç, –º—ã –æ–∂–∏–¥–∞–µ–º, —á—Ç–æ¬†**–ø—Ä–æ—Å—è–¥—É—Ç –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏**, –∞ –≤¬†**—Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏**¬†—ç—Ç–æ–≥–æ –º–æ–∂–µ—Ç¬†**–Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å**. –ò –ø—Ä–æ–≤–æ–¥—è —Ä—è–¥ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ —Å —Ä–∞–∑–Ω—ã–º –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ–º, –º—ã –º–æ–∂–µ–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–æ—á–∫—É —ç–ª–∞—Å—Ç–∏—á–Ω–æ—Å—Ç–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–∞ ‚Äî —Ç–æ—á–∫—É, –Ω–∞—á–∏–Ω–∞—è —Å –∫–æ—Ç–æ—Ä–æ–π –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ —Å–∞–π—Ç–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥–µ–Ω—å–≥–∏. –¢–µ–º —Å–∞–º—ã–º –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å—Å—è –≤–∞—à –ª–∏—á–Ω—ã–π –ê—Ä–º–∞–≥–µ–¥–¥–æ–Ω (–æ –Ω–∞—à–µ–º –ê—Ä–º–∞–≥–µ–¥–¥–æ–Ω–µ —Ä–∞—Å—Å–∫–∞–∂—É –Ω–∏–∂–µ).¬†¬†

–¢–∞–∫–∂–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã –ê/B-—Ç–µ—Å—Ç—ã –Ω–∞ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ‚Äî —á—Ç–æ–±—ã –∏–∑–º–µ—Ä–∏—Ç—å —è–≤–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ IT –Ω–∞ –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏.¬†¬†

> –ü—Ä–æ—á–∏—Ç–∞—Ç—å –æ–± —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö —Å –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–µ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –≤ –≥–ª–∞–≤–µ 5 ¬´–°–∫–æ—Ä–æ—Å—Ç—å –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ**¬ª**¬†–∫–Ω–∏–≥–∏ ¬´**–î–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –ê/–í-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ¬ª**¬†–ö–æ—Ö–∞–≤–∏ –†., –¢–∞–Ω –î., –°—é–π¬†–Ø.¬†

## –í —á–µ–º —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞ –ê/B-—Ç–µ—Å—Ç–æ–≤?¬†

¬†–ê/B-—Ç–µ—Å—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ —Ç—Ä—ë—Ö –æ–±–ª–∞—Å—Ç–µ–π:¬†

1. **–ë–∏–∑–Ω–µ—Å–∞**.¬†–ë–∏–∑–Ω–µ—Å—É –≤–∞–∂–Ω–æ –∏–º–µ—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≤–æ–∏—Ö –≥–∏–ø–æ—Ç–µ–∑ –∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –Ω–æ–≤—ã—Ö —Ñ–∏—á.¬†
    
2. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∏**¬†(—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏). –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—é –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞, –≤—ã–±—Ä–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –Ω–∞–±–æ—Ä –º–µ—Ç—Ä–∏–∫, –≤—ã—á–∏—Å–ª–∏—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞, –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫—Ä–∏—Ç–µ—Ä–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –∏–∑ –º–µ—Ç—Ä–∏–∫.¬†
    
3. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏**. –ù—É–∂–Ω–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –ê/B-—Ç–µ—Å—Ç–æ–≤.¬†  
    ¬†
    

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/ab0/2cb/232/ab02cb232d5aa969b265fe173fbdc889.png)

–¢–µ—Ö–Ω–∏—á–µ—Å–∫—É—é –æ–±–ª–∞—Å—Ç—å –º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –¥–≤–µ —Å–æ—Å—Ç–∞–≤–ª—è—é—â–∏–µ:¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/309/b0b/b07/309b0bb07060a13d90f17423b1468b10.png)

1. **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å–ø–ª–∏—Ç–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.**¬†–û–Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤ —Ä–µ–∞–ª—Ç–∞–π–º–µ –¥–µ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –≥—Ä—É–ø–ø—ã (—Ç–µ—Å—Ç–æ–≤—É—é –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—É—é), –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å, –≤ –∫–∞–∫–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –ø–æ–ø–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –≤–æ–∑–≤—Ä–∞—â–∞—è –≤–∫–ª—é—á—ë–Ω–Ω—ã–µ –¥–ª—è –Ω–µ–≥–æ —Ñ–∏—á–∏. –°–∏—Å—Ç–µ–º–∞ —Å–ø–ª–∏—Ç–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã–¥–µ—Ä–∂–∏–≤–∞–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ RPS, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥- –∏ –±—ç–∫–µ–Ω–¥-–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏, –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∑–∞–ø—É—Å–∫ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫—É —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥—Ä—É–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏.¬†
    

2. **–°—Ç–µ–Ω–¥ –º–µ—Ç—Ä–∏–∫.**¬†–û–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ä–∞—Å—á—ë—Ç –º–µ—Ç—Ä–∏–∫ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—è —Ç–µ—Ä–∞–±–∞–π—Ç—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –≤—ã—á–∏—Å–ª—è–µ—Ç –∫—Ä–∏—Ç–µ—Ä–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏ –∏ –æ—Ç–¥–∞—ë—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤.¬†
    

–í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ —Ä–µ—á—å –ø–æ–π–¥—ë—Ç –æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ —Å–ø–ª–∏—Ç–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –û —Å—Ç–µ–Ω–¥–µ –º–µ—Ç—Ä–∏–∫, –Ω–∞–¥–µ—é—Å—å, –≤—ã–π–¥–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç—å—è.¬†

## –û –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –ê/B-—Ç–µ—Å—Ç–æ–≤ –≤ Ozon¬†

–ù–∞—à–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –ê/B-—Ç–µ—Å—Ç–æ–≤ —á–µ—Ç—ã—Ä–µ –≥–æ–¥–∞. –ó–∞ —ç—Ç–æ –≤—Ä–µ–º—è –æ–Ω–∞ –ø—Ä–æ—à–ª–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç—Ç–∞–ø–æ–≤ –≤–∑—Ä–æ—Å–ª–µ–Ω–∏—è (—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞). –ù–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞—à–µ–≥–æ –æ–ø—ã—Ç–∞ —è –æ–ø–∏—à—É –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ê/B-—Ç–µ—Å—Ç–æ–≤ –∏ –Ω–∞—à–∏ –∏–Ω—Å–∞–π—Ç—ã –≤ –æ–±–ª–∞—Å—Ç–∏ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –º—ã —Å—Ç–∞–ª–∫–∏–≤–∞–ª–∏—Å—å –≤–æ –≤—Ä–µ–º—è —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.¬†

–í—ã –º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ –∑–∞ –≤—Ä–µ–º—è —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã¬†**–∫—Ä–∞—Ç–Ω–æ**¬†–≤—ã—Ä–æ—Å–ª–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ ‚Äî –∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, —É–≤–µ–ª–∏—á–∏–ª–∞—Å—å –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –±—ç–∫–µ–Ω–¥ –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É:¬†

![–ü–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –æ—Å–∏ ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤](https://habrastorage.org/r/w1560/getpro/habr/upload_files/dd7/f4d/4bb/dd7f4d4bb92c3f25b119045a3a595b89.png "–ü–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –æ—Å–∏ ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤")

¬†–ü–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π –æ—Å–∏ ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤¬†

–ü–µ—Ä–≤—ã–º –∫–ª–∏–µ–Ω—Ç–æ–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ê/B-—Ç–µ—Å—Ç–æ–≤ –≤ 2019 –≥–æ–¥—É —Å—Ç–∞–ª–∞ –Ω–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞, –∫–æ–≥–¥–∞ –º—ã –∑–∞–ø—É—Å–∫–∞–ª–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤. –ü–æ–º–Ω—é, –∫–∞–∫ —Ä–µ–±—è—Ç–∞ –∏–∑ Data Science –¥—É–º–∞–ª–∏, —á—Ç–æ —Å–µ–π—á–∞—Å –±—É–¥–µ—Ç —Å—É–ø–µ—Ä–ø—É—à–∫–∞-–∞–ª–≥–æ—Ä–∏—Ç–º, –∑–∞–ø—É—Å–∫–∞–ª–∏ —Ç–µ—Å—Ç, –∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏ –∑–Ω–∞—á–∏–º—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —á–∞—Å—Ç–æ –Ω–µ –Ω–∞–±–ª—é–¥–∞–ª–∏. –ò —ç—Ç–æ –±—ã–ª–æ —Ö–æ—Ä–æ—à–∏–º —Å—Ç–∏–º—É–ª–æ–º –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –Ω–∞—à–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π.¬†

–ï—Å–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –≥—Ä–∞—Ñ–∏–∫ –≤—ã—à–µ, –º–æ–∂–Ω–æ –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ –≤ –∞–ø—Ä–µ–ª–µ —ç—Ç–æ–≥–æ –≥–æ–¥–∞ –±—ã–ª–æ –∑–∞–ø—É—â–µ–Ω–æ –±–æ–ª–µ–µ¬†**100 —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤**. –ò –∏—Ö —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –±–æ–ª—å—à–µ. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –±–ª–∞–≥–æ–¥–∞—Ä—è –≤—ã—Å–æ–∫–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ê/B-—Ç–µ—Å—Ç–æ–≤, —É–¥–æ–±–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ —Ç. –¥., –Ω–æ —Ç–∞–∫–∂–µ –≤—Å–ª–µ–¥—Å—Ç–≤–∏–µ —Ç–æ–≥–æ, —á—Ç–æ –º–µ–Ω—è—é—Ç—Å—è –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –∫–æ–º–ø–∞–Ω–∏–∏. –ù–æ —ç—Ç–æ —É–∂–µ —Å–æ–≤—Å–µ–º –¥—Ä—É–≥–∞—è –∏—Å—Ç–æ—Ä–∏—è...¬†

## –ö–∞–∫ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –ê/B-—Ç–µ—Å—Ç–æ–≤?¬†

¬†–î–∞–ª–µ–µ —è —Ä–∞—Å—Å–∫–∞–∂—É –æ –ø–æ–¥—Ö–æ–¥–∞—Ö, –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –ê/B-—Ç–µ—Å—Ç–æ–≤. –ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –∏—Ö –º–∏–Ω—É—Å—ã –∏ –ø–æ–π–º—ë–º, –∫–∞–∫ –ø—Ä–∏–π—Ç–∏ –∫ ¬´–∏–¥–µ–∞–ª—å–Ω–æ–π¬ª –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ê/B-—Ç–µ—Å—Ç–æ–≤. ¬†

–î–ª—è —ç—Ç–æ–≥–æ –æ–±—Ä–∞—Ç–∏–º—Å—è –∫ –∏—Å—Ç–æ—Ä–∏–∏.¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/d69/796/50a/d6979650a3ae202bfc0386603e0b90fd.png)

C —á–µ–≥–æ –≤—Å—ë –Ω–∞—á–∏–Ω–∞–ª–æ—Å—å?¬†

–ê –Ω–∞—á–∏–Ω–∞–ª–æ—Å—å –≤—Å—ë, –∫–∞–∫ –≤–æ–¥–∏—Ç—Å—è, —Å Ex—Åel-–∫–∏. –í –Ω–µ–π –±—ã–ª–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–±–æ –≤—Å–µ—Ö –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö –¥–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è –∫–æ–º–∞–Ω–¥—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏. –ö–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç –æ–∂–∏–¥–∞–Ω–∏–π, –∞ –∫–æ–Ω—Ñ–∏–≥ –±—ç–∫–µ–Ω–¥–∞ —Å —Ä–µ–∞–ª—å–Ω–æ –∑–∞–ø—É—â–µ–Ω–Ω—ã–º–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º–∏ ‚Äî –æ—Ç –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–π Ex—Åel-–∫–∏. ¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/c42/ed4/e84/c42ed4e84bfa26b7bf05e6bf52998150.png)

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–¥—É–∫—Ç –æ—É–Ω–µ—Ä—ã –º–æ–≥–ª–∏ –ø—Ä–æ–≤–æ–¥–∏—Ç—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã, –æ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –∑–Ω–∞–ª –≥–ª–∞–≤–∞ –∫–æ–º–∞–Ω–¥—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏. –≠—Ç–∏ ¬´–ø–æ–¥–ø–æ–ª—å–Ω—ã–µ¬ª —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –º–æ–≥–ª–∏ –æ–∫–∞–∑—ã–≤–∞—Ç—å –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏ –¥—Ä—É–≥–∏—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ ‚Äî –∏ –æ–± —ç—Ç–æ–º –Ω–µ –∑–Ω–∞–ª¬†**–Ω–∏–∫—Ç–æ**.¬†

–ü—Ä–∏–∫–æ–ª –≤ —Ç–æ–º, —á—Ç–æ¬†—Ñ–∞–π–ª —Å –∫–æ–Ω—Ñ–∏–≥–æ–º —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –±—ã–ª –Ω–µ –æ–¥–∏–Ω, –∞ –∏—Ö –±—ã–ª–æ –¥–≤–∞. –ë—ã–ª –µ—â—ë –æ–¥–∏–Ω –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π ‚Äî –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–∏ Excel-–∫–∏ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ Ozon –±—ã–ª–æ –±–æ–ª—å–Ω–æ. ¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/49a/1d2/dc4/49a1d2dc4e8609c39281a04101c6c78c.png)

–¢–∞–∫–∂–µ –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å —Ç–æ, —á—Ç–æ –Ω–µ –±—ã–ª–æ –µ–¥–∏–Ω–æ–≥–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ —É—á–µ—Ç–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ (–æ–ø–∏—Å–∞–Ω–∏—è –∏—Ö —Ü–µ–ª–µ–π, –º–µ—Ç—Ä–∏–∫ –∏ —Ç. –¥.), –∏—Ö —Ä–µ–∞–ª—Ç–∞–π–º-–∑–∞–ø—É—Å–∫–∞ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏, –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø—É—Å–∫–æ–≤ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–ø—É—Å–∫–∞ –º—É–ª—å—Ç–∏—Å–µ—Ä–≤–∏—Å–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤.¬†

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å—Å—è, –∫–∞–∫ —Ä–µ—à–∏—Ç—å —ç—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã –∏ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –ê/B-–ø–ª–∞—Ç—Ñ–æ—Ä–º—É –º–µ—á—Ç—ã, –¥–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –µ—ë –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.¬†

## OldSchool –º–æ–Ω–æ–ª–∏—Ç ¬†

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ê/B-—Ç–µ—Å—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ –±—ã–ª –≤ Ozon, –∫–∞–∫ –∏ –≤–æ –≤—Å–µ—Ö –∫–æ–º–ø–∞–Ω–∏—è—Ö —Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ ‚Äî —ç—Ç–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–∑ 90-—Ö –∏ —ç—Ç–æ –∫–æ–Ω–µ—á–Ω–æ –∂–µ –º–æ–Ω–æ–ª–∏—Ç. ¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/0d8/739/9ec/0d87399ec696586635fca759cf45dd2e.png)

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Ç–æ–∫–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –ê/B-–≥—Ä—É–ø–ø—É –∫–∞–∫ —Ä–∞–Ω–¥–æ–º —Å —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω—ã–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç 0 –¥–æ 99. ¬†

> `abGroup = random % 100`¬†

–ì—Ä—É–±–æ –≥–æ–≤–æ—Ä—è, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –ø—Ä–æ—Ü–µ–Ω—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –≤ –∫–æ—Ç–æ—Ä—ã–π –æ–Ω –ø–æ–ø–∞–ª –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –î–∞–ª–µ–µ —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∫—É–∫–∞—Ö –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Å —Ñ—Ä–æ–Ω—Ç–∞ –≤ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ.¬†¬†

–ë—ç–∫–µ–Ω–¥-–º–æ–Ω–æ–ª–∏—Ç –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —á–∏—Ç–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –Ω–∞–±–æ—Ä–∞ —Ñ–∏—á –∏ —É–∫–∞–∑–∞–Ω–∏–µ–º, –¥–ª—è –∫–∞–∫–æ–≥–æ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–Ω–∞–±–æ—Ä–∞ –ê/B-–≥—Ä—É–ø–ø) –≤–∫–ª—é—á–∞–µ—Ç—Å—è –∫–∞–∂–¥–∞—è —Ñ–∏—á–∞.¬†

–ü–æ–ª—É—á–∞—è –ê/B-–≥—Ä—É–ø–ø—É –∏–∑ –∫—É–∫, –±—ç–∫–µ–Ω–¥ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–æ–π –Ω–∞–±–æ—Ä —Ñ–∏—á –≤–∫–ª—é—á—ë–Ω –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ù–∞ –ø—Ä–∏–º–µ—Ä–µ –∫–æ–Ω—Ñ–∏–≥–∞ –Ω–∏–∂–µ: –µ—Å–ª–∏ –Ω–∞–º –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤—ã–¥–∞–ª–∏ 40-—é –ê/B-–≥—Ä—É–ø–ø—É, —Ç–æ –Ω–∞–º –≤–µ—Ä–Ω—É–ª—Å—è¬†—Å–ª–µ–¥—É—é—â–∏–π –Ω–∞–±–æ—Ä —Ñ–∏—á:¬†`abGroupNewCheckout`¬†(—Ç–∞–∫ –∫–∞–∫ –µ–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞–±–æ—Ä –ê/B-–≥—Ä—É–ø–ø —Å 35-–π –ø–æ 65-—é) –∏¬†`DeliveryVariant_1`¬†(—Ç–∞–∫ –∫–∞–∫ –µ–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞–±–æ—Ä –ê/B-–≥—Ä—É–ø–ø –≤ –∏–Ω—Ç–µ—Ä–≤–∞–ª–µ —Å 40-–π –¥–æ 54-–π).¬†

–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥–∞:¬†¬†

```
<?xml version="1.0" encoding="UTF-8"?> <config>    <!-- A/B-–≥—Ä—É–ø–ø—ã –¥–ª—è –Ω–æ–≤–æ–≥–æ —á–µ–∫–∞—É—Ç–∞ -->    <add key="abGroupNewCheckout" value=‚Äù 35-65" />    <!-- A/B-–≥—Ä—É–ø–ø—ã –¥–ª—è —Ç–∞—Ä–∏—Ñ–Ω–æ–π –ø–æ–¥—Å–∫–∞–∑–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏-->    <add key="DeliveryVariant_1" value="40-54" />    <add key="DeliveryVariant_2" value="55-69" />    <add key="DeliveryVariant_3" value="15-19,70-79" />    <add key="DeliveryVariant_4" value="0-14" />    <!-- A/B-–≥—Ä—É–ø–ø—ã –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã region –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤ -->    <add key="AbGroupSkipRegionPageForNewUsers" value="0-40,60-100,500" /> </config>
```

**–ë–æ–ª—å**:¬†–æ—á–µ–Ω—å –Ω–µ—É–¥–æ–±–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—å –æ–≥—Ä–æ–º–Ω—ã–π –º–æ–Ω–æ–ª–∏—Ç, —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –∏–ª–∏ –≤—ã–∫–ª—é—á–∏—Ç—å –Ω–µ–±–æ–ª—å—à—É—é —Ñ–∏—á—É.¬†

–î–∞–≤–∞–π—Ç–µ —Ç–µ–ø–µ—Ä—å –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ –º—ã –ø–µ—Ä–µ–Ω–µ—Å–ª–∏—Å—å –∏–∑ 90-—Ö ‚Äî –∏ —É –Ω–∞—Å —É–∂–µ –Ω–µ –º–æ–Ω–æ–ª–∏—Ç, –∞¬†**—Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è**¬†–º—É–ª—å—Ç–∏—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞.¬†

## –ú–æ–ª–æ–¥—ë–∂–Ω–∞—è –º—É–ª—å—Ç–∏—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ¬†

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –µ—ë –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–∞:¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/967/930/0f2/9679300f22dd343eca3a6e36eaecf195.png)

–ó–∞–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–Ω–∞—á–∞–ª–∞ –∏–¥—É—Ç –Ω–∞ —à–ª—é–∑ Ozon. –î–∞–ª–µ–µ –Ω–∞ —à–ª—é–∑–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è, –Ω–∞ –∫–∞–∫–æ–π –±—ç–∫–µ–Ω–¥ –Ω—É–∂–Ω–æ –ø–æ–π—Ç–∏, —á—Ç–æ–±—ã –æ—Ç—Ä–∏—Å–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É. –í –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ —à–ª—é–∑ –∏–¥—ë—Ç –≤ —Å–µ—Ä–≤–∏—Å—ã: PDP (product detail page), —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω—ã–π –∏¬†–æ—Ç–∑—ã–≤—ã. –ú—ã —ç—Ç–æ—Ç –±—ç–∫–µ–Ω–¥ –Ω–∞–∑—ã–≤–∞–µ–º –±—ç–∫–µ–Ω–¥–æ–º –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è –ø–æ —É–¥–∞–ª—ë–Ω–Ω–æ—Å—Ç–∏ –æ—Ç gateway.¬†

–î–∞–ª–µ–µ –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –±—ç–∫–µ–Ω–¥ –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è –∏–¥—ë—Ç –≤ –±—ç–∫–µ–Ω–¥ –≤—Ç–æ—Ä–æ–≥–æ —É—Ä–æ–≤–Ω—è. –í –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ —Å–µ—Ä–≤–∏—Å Recoms (—Å–µ—Ä–≤–∏—Å –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è) –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ü–µ–Ω—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ —É price-api (—Å–µ—Ä–≤–∏—Å –≤—Ç–æ—Ä–æ–≥–æ —É—Ä–æ–≤–Ω—è) –∏ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ ‚Äî —É product service (—Å–µ—Ä–≤–∏—Å –≤—Ç–æ—Ä–æ–≥–æ —É—Ä–æ–≤–Ω—è). ¬†

–ù–∞–ª–æ–∂–∏–º –ø–∞—Ç—Ç–µ—Ä–Ω —Å –ª–æ–∫–∞–ª—å–Ω—ã–º –∫–æ–Ω—Ñ–∏–≥–æ–º –∏ –ê/B-–≥—Ä—É–ø–ø–æ–π –∏–∑ 90-—Ö –Ω–∞ –º–æ–ª–æ–¥—ë–∂–Ω—É—é –º—É–ª—å—Ç–∏—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É ‚Äî –∏ –ø–æ–ª—É—á–∏–º —Å–ª–µ–¥—É—é—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ: ¬†¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/f15/40b/953/f1540b953dae4d8764b5539d8ddc98a5.png)

–ë—ç–∫–µ–Ω–¥ –ø–µ—Ä–≤–æ–≥–æ –∏ –≤—Ç–æ—Ä–æ–≥–æ —É—Ä–æ–≤–Ω–µ–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç –∫–æ–Ω—Ñ–∏–≥ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –ø–æ –ê/B-–≥—Ä—É–ø–ø–∞–º. ¬†

–ü—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ —Å–∞–π—Ç—É –≤ –º–æ–º–µ–Ω—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –æ–Ω –ø–æ–ª—É—á–∞–µ—Ç –ê/B-–≥—Ä—É–ø–ø—É. –§—Ä–æ–Ω—Ç–µ–Ω–¥¬†–ø–µ—Ä–µ–¥–∞—ë—Ç –µ—ë –≤ gateway, gateway, –ø—Ä–æ–∫—Å–∏—Ä—É—è –∑–∞–ø—Ä–æ—Å—ã, –ø–µ—Ä–µ–¥–∞—ë—Ç –ê/B-–≥—Ä—É–ø–ø—É –≤ –±—ç–∫–µ–Ω–¥ –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è. –ë—ç–∫–µ–Ω–¥ –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è –ø–æ –ê/B-–≥—Ä—É–ø–ø–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–±–æ—Ä –≤–∫–ª—é—á—ë–Ω–Ω—ã—Ö —Ñ–∏—á, –ø–µ—Ä–µ–¥–∞—ë—Ç –ê/B-–≥—Ä—É–ø–ø—É –≤ –±—ç–∫–µ–Ω–¥ –≤—Ç–æ—Ä–æ–≥–æ —É—Ä–æ–≤–Ω—è, –∫–æ—Ç–æ—Ä—ã–π –ø–æ –Ω–µ–π —Ç–æ–∂–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–±–æ—Ä –≤–∫–ª—é—á—ë–Ω–Ω—ã—Ö —Ñ–∏—á. ¬†

**–ú–∏–Ω—É—Å—ã —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:**¬†

- –Ω–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤;¬†
    
- –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã;¬†
    
- –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–∞;¬†
    
- –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏/–∑–∞–ø—É—Å–∫–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –≤ —Ä–µ–∞–ª—Ç–∞–π–º–µ: –æ—Å—Ç–∞–Ω–æ–≤–∫–∞/–∑–∞–ø—É—Å–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –¥–µ–ø–ª–æ–π, —Ç–∞–∫ –∫–∞–∫ –¥–ª—è¬†—ç—Ç–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –∫–æ–Ω—Ñ–∏–≥ –∏ —Ä–µ—Å—Ç–∞—Ä—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã;¬†
    
- –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è –º–µ–∂–¥—É —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º–∏, —Ç–∞–∫ –∫–∞–∫ –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –ê/B-–≥—Ä—É–ø–ø–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤;¬†
    
- –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞–≤–∞—Ç—å —É—Å–ª–æ–≤–∏—è –ø–æ–ø–∞–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã.¬†
    

–û–¥–∏–Ω –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö –º–∏–Ω—É—Å–æ–≤ ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–ø—É—Å–∫–∞/–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –≤ —Ä–µ–∞–ª—Ç–∞–π–º–µ. ¬†

## EventDream

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å —Ä–µ–∞–ª—Ç–∞–π–º–æ–º, –º—ã –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å —Å–µ—Ä–≤–∏—Å¬†`ab-test-api`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ–ø–æ–≤–µ—â–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã –æ –∑–∞–ø—É—Å–∫–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –∏ –∏—Ö –æ—Å—Ç–∞–Ω–æ–≤–∫–µ.¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/ce3/34c/83b/ce334c83bbc1f8ceb4c7f1c054a7803f.png)

–õ–æ–≥–∏–∫–∞ —Ç–∞–∫–∞—è –∂–µ, –∫–∞–∫ –≤ –ø–æ–¥—Ö–æ–¥–µ –≤—ã—à–µ, —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö –º–æ–∂–µ—Ç –ª–µ–≥–∫–æ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∏ –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞—è.¬†

–û–¥–Ω–∞–∫–æ –æ—Å—Ç–∞–ª–∏—Å—å –¥—Ä—É–≥–∏–µ –º–∏–Ω—É—Å—ã:¬†

- –Ω–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤;¬†
    
- –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã;¬†
    
- –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–∞;¬†
    
- –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è –º–µ–∂–¥—É —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º–∏, —Ç–∞–∫ –∫–∞–∫ –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –ê/B-–≥—Ä—É–ø–ø–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤;¬†
    
- –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞–≤–∞—Ç—å —É—Å–ª–æ–≤–∏—è –ø–æ–ø–∞–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã.¬†
    

–ù–∞—Å —ç—Ç–æ –Ω–µ –æ—á–µ–Ω—å —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç, –ø–æ—ç—Ç–æ–º—É –ø–æ–ø—Ä–æ–±—É–µ–º –¥—Ä—É–≥–æ–π –ø–æ–¥—Ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∏—Ç —Å—Ä–∞–∑—É —Ç—Ä–∏ –ø—Ä–æ–±–ª–µ–º—ã. –ò —ç—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –∫–æ–Ω–µ—á–Ω–æ –∂–µ...

## Single Responsibility

–í —ç—Ç–æ–º –ø–æ–¥—Ö–æ–¥–µ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –≤ –∫–æ—Ç–æ—Ä–æ–π —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–º —Å–µ—Ä–≤–∏—Å–æ–º –±—É–¥–µ—Ç¬†`ab-test-api`. ¬†

–§—É–Ω–∫—Ü–∏–∏ —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:¬†

- —Ö—Ä–∞–Ω–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–±–æ –≤—Å–µ—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö —Å –∏—Å—Ç–æ—Ä–∏–µ–π –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤;¬†
    
- –æ—Ç–¥–∞–≤–∞—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞–±–æ—Ä –≤–∫–ª—é—á—ë–Ω–Ω—ã—Ö —Ñ–∏—á.¬†
    

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/2bf/997/140/2bf997140963266d8298cbadb1ef8477.png)

–û–±—â–∞—è –ª–æ–≥–∏–∫–∞ —Å –ê/B-–≥—Ä—É–ø–ø–æ–π –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω–æ–π, —Ç–æ–ª—å–∫–æ —Ç–µ–ø–µ—Ä—å –±—ç–∫–µ–Ω–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –Ω–∞–±–æ—Ä–µ –≤–∫–ª—é—á—ë–Ω–Ω—ã—Ö —Ñ–∏—á –±—É–¥–µ—Ç –∏–¥—Ç–∏ –≤ —Å–µ—Ä–≤–∏—Å¬†`ab-test-api`, –ø–µ—Ä–µ–¥–∞–≤–∞—è –≤ –Ω–µ–≥–æ A/B-–≥—Ä—É–ø–ø—É. ¬†

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤ –∫–∞–∂–¥–æ–º –∏–∑ —Å–µ—Ä–≤–∏—Å–æ–≤ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –Ω–µ –Ω—É–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å, –∫–∞–∫–∞—è —Ñ–∏—á–∞ –≤–∫–ª—é—á–µ–Ω–∞ –¥–ª—è –∫–∞–∫–æ–π –ê/B-–≥—Ä—É–ø–ø—ã, –∏ —Ö—Ä–∞–Ω–∏—Ç—å —Å–≤–æ–π –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥.¬†

**–ú–∏–Ω—É—Å—ã —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:**¬†

- –≤—ã—Å–æ–∫–∏–π RPS, —Ç–∞–∫ –∫–∞–∫ –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∏–¥—ë—Ç –∑–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º–∏;¬†
    
- –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è –º–µ–∂–¥—É —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º–∏, —Ç–∞–∫ –∫–∞–∫ –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –ê/B-–≥—Ä—É–ø–ø–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤;¬†
    
- –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞–≤–∞—Ç—å —É—Å–ª–æ–≤–∏—è –ø–æ–ø–∞–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã.¬†
    

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç–∞–ª–∞ –Ω–∞–º–Ω–æ–≥–æ –ª—É—á—à–µ, –ø—Ä–∞–≤–¥–∞ –ø–æ—è–≤–∏–ª–∞—Å—å –ø—Ä–æ–±–ª–µ–º–∞ —Å –≤—ã—Å–æ–∫–∏–º RPS: –∫–∞–∫ –≥–æ–≤–æ—Ä–∏—Ç—Å—è, –∑–∞ –≤—Å—ë –Ω—É–∂–Ω–æ –ø–ª–∞—Ç–∏—Ç—å. ¬†

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –º—ã –º–æ–∂–µ–º —Ä–µ—à–∏—Ç—å –≤–∞–∂–Ω–µ–π—à—É—é –ø—Ä–æ–±–ª–µ–º—É –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ ‚Äî –Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –º–µ–∂–¥—É —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º–∏. ¬†

## –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º–∞—è –ê/B-–≥—Ä—É–ø–ø–∞, –∏–ª–∏ –°–≤–æ–π —à–µ–π–∫–µ—Ä –≤ –∫–∞–∂–¥–æ–º —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–µ

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ø–æ–ø–∞–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –æ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ê/B-–≥—Ä—É–ø–ø—ã, –≤—Å–ª–µ–¥—Å—Ç–≤–∏–µ —á–µ–≥–æ –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –º–µ–∂–¥—É —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º–∏. –ú—ã –±—É–¥–µ–º –≤—ã—á–∏—Å–ª—è—Ç—å –≤ –∫–∞–∂–¥–æ–º —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–µ —Å–≤–æ—é –ê/B-–≥—Ä—É–ø–ø—É. ¬†¬†

–î–ª—è —ç—Ç–æ–≥–æ —É–±–∏—Ä–∞–µ–º –ø–æ—Ö–æ–¥ –≤ —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–ª–∏—à–Ω—è—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —É—Ö–æ–¥–∏—Ç ‚Äî —É—Ä–∞!) ‚Äî –∏ –≤–º–µ—Å—Ç–æ –ê/B-–≥—Ä—É–ø–ø—ã –±—É–¥–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. ¬†

–¢–µ–ø–µ—Ä—å –≤ —Å–µ—Ä–≤–∏—Å–µ¬†`ab-test-api`¬†–≤ –∫–∞–∂–¥–æ–º —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–µ –º—ã –º–æ–∂–µ–º –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ê/B-–≥—Ä—É–ø–ø—É –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –í—ã—á–∏—Å–ª—è—Ç—å –µ—ë –∫–∞–∫ —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏—é –æ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ–¥–º–µ—à–∏–≤–∞—è¬†`salt`:¬†

> `ABGroup = hash(userID + salt) %100`¬†

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–∞–∫–∂–µ –¥–µ–ª–∞—Ç—å –≤ A/B-—Ç–µ—Å—Ç–∞—Ö —Å–ª–æ–∏ –∏ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞–∑–º–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –º–µ–∂–¥—É –≤—Å–µ–º–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º–∏.¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/1af/e89/f1e/1afe89f1e0ca55bbfebb202419669f2a.png)

–ö–∞–∫–∏–µ –æ—Å—Ç–∞–ª–∏—Å—å –º–∏–Ω—É—Å—ã:¬†

- –≤—ã—Å–æ–∫–∏–π RPS, —Ç–∞–∫ –∫–∞–∫ –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∏–¥—ë—Ç –∑–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º–∏;¬†
    
- –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞–≤–∞—Ç—å —É—Å–ª–æ–≤–∏—è –ø–æ–ø–∞–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã.¬†
    

## –í–º–µ—Å—Ç–æ —Ç—ã—Å—è—á–∏ Ã∂—ÅÃ∂–ªÃ∂–æÃ∂–≤Ã∂ –∫–∞—Å–∫–∞–¥–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Üí gateway

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É –∫–∞—Å–∫–∞–¥–Ω–æ–≥–æ —É–≤–µ–ª–∏—á–µ–Ω–∏—è RPS, –º—ã –±—É–¥–µ–º –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ gateway –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏—Ö –≤–æ –≤—Å–µ –±—ç–∫–µ–Ω–¥—ã.¬†

–í—Å—ë –∫—Ä–∞—Å–∏–≤–æ. –ü—Ä–∞–≤–¥–∞, —Ç—É—Ç –º—ã —Å—Ç–∞–ª–∫–∏–≤–∞–µ–º—Å—è —Å –Ω–æ–≤–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π: –∞ –∫–∞–∫ –∏–º–µ–Ω–Ω–æ –Ω–∞–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–±–æ –≤—Å–µ—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö –≤ –±—ç–∫–µ–Ω–¥ –ø–µ—Ä–≤–æ–≥–æ –∏ –≤—Ç–æ—Ä–æ–≥–æ —É—Ä–æ–≤–Ω–µ–π? –ú—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –µ—ë —è–≤–Ω–æ, –Ω–æ –¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≤—Å–µ—Ö —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤, —á—Ç–æ –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞—Ç–∏—á–Ω–æ –∏ –Ω–µ—É–¥–æ–±–Ω–æ. –ö –Ω–∞–º –Ω–∞ –ø–æ–º–æ—â—å –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å–º–µ–∫–∞–ª–æ—á–∫–∞ –∏ –∏–¥–µ—è –¥–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å header. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –º—ã –æ–¥–∏–Ω —Ä–∞–∑ –ø–∏—à–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö –≤ header-–∑–∞–ø—Ä–æ—Å–∞—Ö gateway ¬†‚Äî –∏ –¥–∞–ª—å—à–µ –æ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤–æ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –±—ç–∫–µ–Ω–¥–∞.¬†

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö, –º—ã –ø—Ä–æ—Å—Ç–æ –≤ gateway –¥–µ–ª–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–∏—Å—É user_profile. –î–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏ –æ—Ç–¥–∞–µ—Ç –Ω–∞–º –µ—ë. –î–∞–ª–µ–µ gateway –ø–µ—Ä–µ–¥–∞—ë—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –≤ —Å–µ—Ä–≤–∏—Å¬†`ab-test-api`¬†–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ–± —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö.¬†`ab-test-api`¬†–Ω–∞—Ö–æ–¥–∏—Ç —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã, —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—â–∏–µ –¥–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–∏—Ö –æ—Ç–¥–∞—ë—Ç –Ω–∞–±–æ—Ä –≤–∫–ª—é—á—ë–Ω–Ω—ã—Ö —Ñ–∏—á.

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/4a2/e2b/834/4a2e2b834de9e2eec99ddbcd627dbc60.png)

–ú–∏–Ω—É—Å:¬†

- –≤—Å—ë –µ—â—ë –æ—Å—Ç–∞—ë—Ç—Å—è –≤—ã—Å–æ–∫–∏–π RPS, —Ç–∞–∫ –∫–∞–∫ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å gateway –∏–¥—ë—Ç –≤ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É A/B-—Ç–µ—Å—Ç–æ–≤.¬†
    

## –ö–∞–∫ –º—ã —Å–ø—Ä–∞–≤–ª—è–µ–º—Å—è —Å –≤—ã—Å–æ–∫–∏–º RPS?

–î–ª—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –¥–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä—ë–º—Å—è, –∫–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –≤ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É A/B-—Ç–µ—Å—Ç–æ–≤.

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –≤ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É A/B-—Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞–ø—Ä–æ—Å –∏–¥—ë—Ç –≤ A/B-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä ‚Äî —Å–µ—Ä–≤–∏—Å, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤—Å–µ—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤. –û–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –Ω–æ–≤–æ–º —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∏—Ö –≤¬†`etcd`¬†(key-value storage). –ù–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤¬†`etcd`¬†–ø–æ–¥–ø–∏—Å–∞–Ω —Å–µ—Ä–≤–∏—Å¬†`ab-test-api`, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –±—ã—Å—Ç—Ä—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã –±—ç–∫–µ–Ω–¥–∞. ¬†¬†

–ü–æ—Å–∫–æ–ª—å–∫—É –¥–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –ø–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∫–∞—Å–∞—é—â–∏–µ—Å—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤, –æ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à. –í –ª–æ–∫–∞–ª—å–Ω–æ–º –∫—ç—à–µ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–±–æ –≤—Å–µ—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö, —Ç–µ–∫—É—â–∏—Ö –∏ –±—É–¥—É—â–∏—Ö, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –æ—Ç–¥–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –≤ –Ω–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/aa5/2ce/6ea/aa52ce6eac46020969c99976b3a646eb.png)

–ë–ª–∞–≥–æ–¥–∞—Ä—è —Ç–æ–º—É, —á—Ç–æ —É —Å–µ—Ä–≤–∏—Å–∞¬†`ab-test-api`¬†–≤—Å—ë –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–∫–µ –∏ –æ–Ω –ø–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∫–∞—Å–∞—é—â–∏–µ—Å—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤, –º—ã –µ–≥–æ –º–æ–∂–µ–º –ª–µ–≥–∫–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –∏ –≤—ã–¥–µ—Ä–∂–∏–≤–∞—Ç—å¬†**–ª—é–±–æ–π RPS**.¬†

**–ú–∏–Ω—É—Å—ã:**¬†

- –∏—Ö –Ω–µ—Ç¬†ü§û¬†
    

–û —á—ë–º –º—ã –∑–∞–±—ã–ª–∏ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ?¬†

–û —Ç–æ–º, –±–µ–∑ —á–µ–≥–æ –ê/B-—Ç–µ—Å—Ç—ã –ª–∏—à–µ–Ω—ã —Å–º—ã—Å–ª–∞, ‚Äî –æ–±¬†**–∞–Ω–∞–ª–∏—Ç–∏–∫–µ.**¬†

## –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É

–î–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —á—Ç–æ–±—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–º, –≤ –∫–∞–∫–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –ø–æ–ø–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –±—ã–ª–∞ –≤ Data Lake.¬†

–ú—ã —ç—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–ª–∏ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º. –ö–æ–≥–¥–∞ gateway –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –æ—Ç –±—ç–∫–µ–Ω–¥–∞, –æ–Ω –≤—Å—é —Å–æ–±—Ä–∞–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–µ—Ä–µ–¥–∞—ë—Ç –≤ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ / —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥. –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ / —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ—Ç–≤–µ—Ç –±—ç–∫–µ–Ω–¥–∞ –∏, —Ä–µ–∞–≥–∏—Ä—É—è –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç –±–∞—Ç—á –∏–≤–µ–Ω—Ç–æ–≤. –í –Ω—É–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –æ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –∏—Ö –≤ —Ç—Ä–µ–∫–µ—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏. –û–Ω –æ–±–æ–≥–∞—â–∞–µ—Ç –≤—Å–µ –∏–≤–µ–Ω—Ç—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö: –¥–ª—è —ç—Ç–æ–≥–æ –æ–Ω –ø–µ—Ä–µ–¥–∞—ë—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –≤ —Å–µ—Ä–≤–∏—Å¬†`ab-test-api`, –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –∏ —É–∂–µ –æ–±–æ–≥–∞—â—ë–Ω–Ω—ã–µ –∏–≤–µ–Ω—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Data Lake.¬†

–¢–µ–ø–µ—Ä—å –ª—é–±–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫ –º–æ–∂–µ—Ç –ø–æ–π—Ç–∏ –≤ Data Lake –∏ –≤—ã—Ü–µ–ø–∏—Ç—å –≤—Å–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–µ –µ–≥–æ –∏–≤–µ–Ω—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞. Profit! üòé¬†

**–ü—Ä–µ–∫—Ä–∞—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –º—ã –≤—ã–¥–µ—Ä–∂–∏–≤–∞–µ–º –ª—é–±–æ–π RPS.**¬†–í–Ω–∏–º–∞–Ω–∏–µ, –≤–æ–ø—Ä–æ—Å:¬†

![](https://habrastorage.org/r/w780q1/getpro/habr/upload_files/b48/b5d/7cc/b48b5d7cc3e583d51e06fe052141ae4e.jpg)

–ê –¥–∞–ª—å—à–µ –±—ã–ª...¬†

![](https://habrastorage.org/r/w780q1/getpro/habr/upload_files/84c/0be/346/84c0be34637269c01d4e97f931a6df2c.jpg)

–£ –Ω–∞—Å —É–º–µ—Ä —Å—Ç–µ–π–¥–∂, –∏ –º—ã –¥–æ–ª–≥–æ –Ω–µ –º–æ–≥–ª–∏ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ. –û–∫–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ –≤—Å—ë-—Ç–∞–∫–∏ —É –Ω–∞—à–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –±—ã–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞. –ò –ø—Ä–æ–±–ª–µ–º–æ–π —ç—Ç–æ–π –±—ã–ª header, –≤ –∫–æ—Ç–æ—Ä—ã–π –º—ã –Ω–µ —Å—Ç–µ—Å–Ω—è–ª–∏—Å—å –ø–∏—Å–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–±–æ –≤—Å–µ—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ –≤ Ozon. –ò –∫–æ–≥–¥–∞ –µ–≥–æ —Ä–∞–∑–º–µ—Ä –ø—Ä–µ–≤—ã—Å–∏–ª 4 –ö–±–∞–π—Ç, –º—ã –ø—Ä–µ–≤—ã—Å–∏–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ Nginx ‚Äî –∏ –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞—Å—å –æ—à–∏–±–∫–∞.¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/b11/da9/1b7/b11da91b78ceacb1d7ab4f96f90d0218.png)

–ß—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –≤ —á—ë–º –±—ã–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –¥–≤–∞ —Å–µ—Ä–≤–∏—Å–∞, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ—Ö–æ–¥—è—Ç —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã:¬†

- **—Å–µ—Ä–≤–∏—Å –ø–æ–∏—Å–∫–∞**¬†c –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º¬†`rankingAlgorithm string`,¬†
    
- **—Å–µ—Ä–≤–∏—Å –∫–æ—Ä–∑–∏–Ω—ã**¬†—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º¬†`IsNewCart string`.¬†
    

–ï—Å–ª–∏ –¥–ª—è —ç—Ç–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å JSON, –∫–æ—Ç–æ—Ä—ã–π –º—ã –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏ –≤ header, —Ç–æ –æ–Ω –±—É–¥–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∏–¥–∞:¬†

```
{         "search": {                 "config": {                         "rankingAlgo": "newAlgo"                 },                 "experiments": [{"ID":1,"variantID":2}]         },         "cart": {                 "config": {                         "isNewCart": true                 },                 "experiments": [{"ID":2,"variantID":4}] } 
```

–ò –µ—Å–ª–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–Ω–æ–≥–æ, —Ç–æ —ç—Ç–æ—Ç JSON –º–æ–∂–µ—Ç –Ω–∞–±–∏—Ä–∞—Ç—å –∫–∏–ª–æ–±–∞–π—Ç–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã. ¬†

–î–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –≥–∏–≥–∞–Ω—Ç—Å–∫–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ JSON –º—ã –ø—Ä–∏–¥—É–º–∞–ª–∏ —Å–ª–µ–¥—É—é—â–∏–π FastFix.¬†

## FastFix

–ò–¥–µ—è: –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–≥–æ JSON –≤ header –±—É–¥–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π UUID. ¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/7e0/6da/101/7e06da101ff39e1c1e92cf98e75072ab.png)

–î–ª—è —ç—Ç–æ–≥–æ ab-test-api –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ –æ—Ç gateway –≤—ã—á–∏—Å–ª—è–µ—Ç JSON, –≥–µ–Ω–µ—Ä–∏—Ç¬†**UUID**¬†–∏ –¥–∞–ª–µ–µ —ç—Ç–æ—Ç JSON –ø–æ –∫–ª—é—á—É UUID —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ Memcached. –¢–µ–ø–µ—Ä—å –ø–æ —ç—Ç–æ–º—É –∫–ª—é—á—É –±—ç–∫–µ–Ω–¥ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. ¬†

–ü–æ—ç—Ç–æ–º—É —Å–µ—Ä–≤–∏—Å¬†`ab-test-api`¬†–≤–º–µ—Å—Ç–µ —Å –∫–æ–Ω—Ñ–∏–≥–æ–º –±—ç–∫–µ–Ω–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç UUID –≤ gateway –∏ –¥–∞–ª–µ–µ gateway –ø–µ—Ä–µ–¥–∞—ë—Ç –≤ header UUID –≤—Å–µ–º —Å–µ—Ä–≤–∏—Å–∞–º –±—ç–∫–µ–Ω–¥–∞. –ö–æ–≥–¥–∞ –±—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–∏—Å—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∑–Ω–∞—Ç—å, –∫–∞–∫–∏–µ —Ñ–∏—á–∏ –≤–∫–ª—é—á–µ–Ω—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –æ–Ω –∏–¥—ë—Ç –≤¬†`ab-test-api`, –ø–µ—Ä–µ–¥–∞–≤–∞—è —Ç—É–¥–∞ UUID.¬†`ab-test-api`¬†–≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –∏–¥—ë—Ç –ø–æ —ç—Ç–æ–º—É –∫–ª—é—á—É –≤ Memcached, –ø–æ–ª—É—á–∞–µ—Ç JSON –∏ –∏–∑ –Ω–µ–≥–æ –æ—Ç–¥–∞—ë—Ç –Ω–∞–±–æ—Ä –≤–∫–ª—é—á—ë–Ω–Ω—ã—Ö —Ñ–∏—á–µ–π –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞.¬†

–¢–∞–∫–∂–µ –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏–∑ gateway —è–≤–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –Ω–∞–±–æ—Ä –≤–∫–ª—é—á—ë–Ω–Ω—ã—Ö —Ñ–∏—á –≤ body, —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –ª–∏—à–Ω–µ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫¬†`ab-test-api`.¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/51b/4d9/c65/51b4d9c6523abe9f666dd49ac021ccc8.png)

–¢–∞–∫ –º—ã —Ä–µ—à–∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—É –±–æ–ª—å—à–æ–≥–æ header ‚Äî —Ç–µ–ø–µ—Ä—å –µ–≥–æ —Ä–∞–∑–º–µ—Ä –≤—Å–µ–≥–¥–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω. ¬†

–ö–∞–∂–µ—Ç—Å—è, –º–æ–∂–Ω–æ –±—ã–ª–æ –Ω–∞ —ç—Ç–æ–º –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è, –Ω–æ —É –¥–∞–Ω–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –µ—Å—Ç—å –º–∏–Ω—É—Å—ã:¬†

- –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π RPS —Å–µ—Ä–≤–∏—Å–æ–≤ –≤—Ç–æ—Ä–æ–≥–æ —É—Ä–æ–≤–Ω—è;¬†
    
- –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –æ—Ç Memcached,¬†–∫–æ—Ç–æ—Ä—ã–π –Ω–∞ —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∞—Ö –Ω—É–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å.¬†
    

–ü–æ—Å–∫–æ–ª—å–∫—É –º—ã —É–ø–æ—Ä–æ—Ç—ã–µ –∏–Ω–∂–µ–Ω–µ—Ä—ã –∏ –±–æ—Ä–µ–º—Å—è –∑–∞ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã, —Ç–æ –ø—Ä–∏–¥—É–º–∞–ª–∏, –∫–∞–∫ –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç —ç—Ç–∏—Ö –¥–≤—É—Ö –º–∏–Ω—É—Å–æ–≤ –∏ —Å–¥–µ–ª–∞—Ç—å¬†**–∏–¥–µ–∞–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É**¬†üíé¬†¬†

## –ò–¥–µ–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ö–∞–∫ —Å–∫–∞–∑–∞–ª –ñ–∞–∫ –ü–µ—à–µ,¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/1ae/7e6/151/1ae7e6151ad542bf6d4180b434719d64.png)

### –ü–æ—ç—Ç–æ–º—É –ø–ª–∞–Ω —Ç–∞–∫–æ–π:¬†

- —á—Ç–æ–±—ã –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç Memcached, –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–± —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö –≤ header, –∫–∞–∫ –≤ —Å—Ç–∞—Ä—ã–µ –¥–æ–±—Ä—ã–µ –≤—Ä–µ–º–µ–Ω–∞;¬†
    
- —á—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É RPS —Å–µ—Ä–≤–∏—Å–æ–≤ –≤—Ç–æ—Ä–æ–≥–æ —É—Ä–æ–≤–Ω—è, –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∫—ç—à;¬†
    
- —á—Ç–æ–±—ã –Ω–µ –Ω–∞—Å—Ç—É–ø–∏–ª –ê—Ä–º–∞–≥–µ–¥–¥–æ–Ω —Å —Ä–∞–∑–º–µ—Ä–æ–º header, –Ω—É–∂–Ω–æ –ø—Ä–∏–¥—É–º–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–∂–∞—Ç–∏—è –¥–∞–Ω–Ω—ã—Ö –æ–± —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö.¬†
    

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç –≤—Å—ë —ç—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã ‚Äî¬†**–±–∏–Ω–∞—Ä–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª**¬†–ø–µ—Ä–µ–¥–∞—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö, –≤ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ø–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å. ¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/80b/2ee/987/80b2ee98713cd8e25af141e118c923c9.png)

–¶–µ–ª—å –±–∏–Ω–∞—Ä–Ω–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ ‚Äî –≤ –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª–µ–µ —Å–∂–∞—Ç–æ–º –≤–∏–¥–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö, –≤ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ø–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å. ¬†

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –∫–∞–∫ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–∫–ª—é—á—ë–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤, —Ç–æ –µ—Å—Ç—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–∞ –∫—ç—à–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –±—ç–∫–µ–Ω–¥–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫—ç—à –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –±—ç–∫–µ–Ω–¥–∞ –≤—Ç–æ—Ä–æ–≥–æ —É—Ä–æ–≤–Ω—è, —á—Ç–æ–±—ã –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å RPS.¬†

–ú—ã –ø—Ä–∏–¥—É–º–∞–ª–∏ —Å–ª–µ–¥—É—é—â–∏–π —Ñ–æ—Ä–º–∞—Ç –±–∏–Ω–∞—Ä–Ω–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞:¬†

- –ø–µ—Ä–≤—ã–µ 10 –±–∏—Ç –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ —Å–µ—Ä–≤–∏—Å–∞ (–º—ã –æ—Ç—Ç–∞–ª–∫–∏–≤–∞–µ–º—Å—è –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Ä–≤–∏—Å–æ–≤ ‚Äî 2^10);¬†
    
- 4 –±–∏—Ç–∞ –Ω–æ–º–µ—Ä —Ä–µ–≤–∏–∑–∏–∏, –∫–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã/—É–¥–∞–ª—è—é—Ç—Å—è –º–µ–Ω—è–µ—Ç—Å—è –Ω–æ–º–µ—Ä —Ä–µ–≤–∏–∑–∏–∏. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º—ã —Ä–µ—à–∏–ª–∏ –æ–¥–Ω—É –∏–∑ –≥–ª–∞–≤–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –≤ IT ‚Äî –ø—Ä–æ–±–ª–µ–º—É –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫—ç—à–∞;¬†
    
- n –±–∏—Ç –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –±–∏—Ç–æ–≤–æ–π –º–∞—Å–∫–∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤, –≤ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ø–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.¬†
    

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/1e6/f72/cc6/1e6f72cc671fa5480e88d763de644ba9.png)

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, JSON –∏–∑ –Ω–∞—à–µ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ —ç—Ç–æ—Ç –∫—Ä–∞—Å–∏–≤—ã–π —Ñ–æ—Ä–º–∞—Ç:¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/991/109/cee/991109cee92917b3d63c066eeabf2e2f.png)

–ü–æ–ª—É—á–∞–µ—Ç—Å—è –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π¬†`ab-test-api`¬†–ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ –æ—Ç gateway –≤—ã—á–∏—Å–ª—è–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞—à–µ–≥–æ –±–∏–Ω–∞—Ä–Ω–æ–≥–æ –∫–ª—é—á–∞ (binary key) –∫–∞–∫ –Ω–∞–±–æ—Ä —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤, –≤ –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ø–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å. –¢–µ–ø–µ—Ä—å –ø–æ —ç—Ç–æ–º—É –∫–ª—é—á—É –±—ç–∫–µ–Ω–¥ –º–æ–∂–µ—Ç –≤–∑—è—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫—ç—à–∞ –∏–ª–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –∏—Ö –¥–ª—è –ø—Ä–æ–≥—Ä–µ–≤–∞. ¬†

–ü–æ—ç—Ç–æ–º—É –º—ã –ø—Ä–æ–∫—Å–∏—Ä—É–µ–º binary key –≤–º–µ—Å—Ç–æ UUID –∏–∑ gateway –≤–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –±—ç–∫–µ–Ω–¥–∞ –≤ header. –ö–æ–≥–¥–∞ –±—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–∏—Å—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∑–Ω–∞—Ç—å, –∫–∞–∫–∏–µ —Ñ–∏—á–∏ –≤–∫–ª—é—á–µ–Ω—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –æ–Ω —Å–º–æ—Ç—Ä–∏—Ç, –µ—Å—Ç—å –ª–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ –±–∏–Ω–∞—Ä–Ω–æ–º—É –∫–ª—é—á—É –≤ –∫—ç—à–µ? –ï—Å–ª–∏ –µ—Å—Ç—å, —Å—Ä–∞–∑—É –±–µ—Ä—ë—Ç –∏—Ö, –µ—Å–ª–∏ –Ω–µ—Ç ‚Äî –∏–¥—ë—Ç –≤¬†`ab-test-api`¬†—Å binary key, –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞–±–æ—Ä –≤–∫–ª—é—á—ë–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ñ–∏—á –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ –∫—ç—à. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –µ—Å–ª–∏ —Å —Ç–∞–∫–∏–º –∂–µ –±–∏–Ω–∞—Ä–Ω—ã–º –∫–ª—é—á–æ–º –ø—Ä–∏–¥—ë—Ç –µ—â—ë –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ–∑—å–º—ë–º –∏–∑ –∫—ç—à–∞.¬†

–¢–∞–∫–∂–µ –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è –º—ã –ø–µ—Ä–µ–¥–∞—ë–º –∏–∑ gateway —è–≤–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –Ω–∞–±–æ—Ä –≤–∫–ª—é—á—ë–Ω–Ω—ã—Ö —Ñ–∏—á –≤ body –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/114/68b/32b/11468b32b7e82fc3a7c0683a8fcec9f6.png)

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –º—ã —É–±—Ä–∞–ª–∏ –ª–∏—à–Ω—é—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç Memcached ‚Äî –∏ –º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å –Ω–∞ —Å–∫–æ–ª—å–∫–æ —É–ø–∞–ª RPS –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ –≤—Ç–æ—Ä–æ–≥–æ —É—Ä–æ–≤–Ω—è: –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ —Å–µ—Ä–≤–∏—Å–∞¬†`rtb-api`, –≤ –∫–æ—Ç–æ—Ä–æ–º —É –Ω–∞—Å –±—ã–ª–æ —É–º–µ–Ω—å—à–µ–Ω–∏–µ RPS¬†**–≤ 500 —Ä–∞–∑**¬†(—Å 5k –¥–æ 9.87).

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/f58/eb4/74e/f58eb474ed65b12cfce691f0628117e1.png)

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/d4f/de6/cda/d4fde6cdaaf7483169d09de2f7de0797.png)

## –ê/B –Ω–∞ –æ—Å—Ç—Ä–∏–µ –∞—Ç–∞–∫–∏ RPS

–ë–ª–∞–≥–æ–¥–∞—Ä—è –ø—Ä–æ—Å—Ç–æ—Ç–µ, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ –∏ –∫—Ä–∞—Å–æ—Ç–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ê/B-—Ç–µ—Å—Ç–æ–≤ –Ω–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ —á–∞—Å—Ç–æ –Ω–∞—Ö–æ–¥–∏–ª–∞¬†–ø—Ä–æ–±–ª–µ–º—ã –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —Å—Ç–æ—è–ª–∞ —É –∏—Å—Ç–æ–∫–æ–≤ –±–æ–ª—å—à–∏—Ö –æ—Ç–∫—Ä—ã—Ç–∏–π Ozon.¬†

–ó–∞ –≤—Ä–µ–º—è –º–æ–µ–π —Ä–∞–±–æ—Ç—ã –≤ –∫–æ–º–ø–∞–Ω–∏–∏ –±—ã–ª–∏ –∑–∞–ø—É—â–µ–Ω—ã —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∏—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–∫–∞–∑–∞–ª–∏ –±–æ–ª—å—à–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–∞ –≤—Å–µ–≥–æ –±—ç–∫–µ–Ω–¥–∞. –ò –±–µ–∑ —Å—Ç–µ—Å–Ω–µ–Ω–∏—è –º–æ–≥—É —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —á–∞—Å—Ç–æ –≤—Å—ë –Ω–∞—á–∏–Ω–∞–ª–æ—Å—å —Å –Ω–∞—à–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ê/B-—Ç–µ—Å—Ç–æ–≤.¬†

> **~~–í –Ω–∞—á–∞–ª–µ –±—ã–ª–æ —Å–ª–æ–≤–æ~~**
> 
> ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† **–í –Ω–∞—á–∞–ª–µ –±—ã–ª –ê/B-—Ç–µ—Å—Ç**

### –ü—Ä–æ–±–ª–µ–º–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏

–í–≤–æ–¥–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:¬†

- –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ ab-test-api –ø–æ 99 –∫–≤–∞–Ω—Ç–∏–ª–∏ <¬†**1 –º—Å**;¬†
    
- –æ–¥–Ω–∞–∫–æ –º—ã –æ—Ç–≤–∞–ª–∏–≤–∞–ª–∏—Å—å –ø–æ —Ç–∞–π–º-–∞—É—Ç—É –æ—Ç gateway, –∫–æ—Ç–æ—Ä—ã–π —à—ë–ª —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –æ–∂–∏–¥–∞–Ω–∏—è¬†**10 –º—Å.**¬†–¢–∞–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –±—ã–ª–æ¬†
    

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/ce4/c08/bb5/ce4c08bb5eb1871ee8bf8d3aaf8e1151.png)

4% –æ—à–∏–±–æ–∫ –ê/B-—Ç–µ—Å—Ç–æ–≤, –ø—Ä—ã–≥–∞—é—â–∏—Ö —Ñ–∏—á –∏ –ø—Ä–æ–±–ª–µ–º –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ ‚Äî —ç—Ç–æ –±–µ–¥–∞.¬†

–ö–æ–≥–¥–∞ —Ç—ã –ø—Ä–∏—Ö–æ–¥–∏—à—å –∫ –∫–æ–º–∞–Ω–¥–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –≥–æ–≤–æ—Ä–∏—à—å, —á—Ç–æ –≤—Ä–æ–¥–µ –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ, —Ç–µ–±–µ –≤—Å–µ–≥–¥–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ –æ—Ç–≤–µ—á–∞—é—Ç: ¬†

> ¬´–í–∞—à –∫–æ–¥ ‚Äî¬†~~üí©~~¬†–Ω–µ –æ—á–µ–Ω—å, –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ¬ª.¬†

–ï—Å–ª–∏ —Ç—ã –æ—Ç–≤–µ—á–∞–µ—à—å, —á—Ç–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ—á–∫–∞ ‚Äî –æ–≥–æ–Ω—å, —Ç–µ–±–µ –æ—Ç–≤–µ—á–∞—é—Ç: ¬´–°–º. –ø. 1¬ª.¬†

–ü—Ä–∏—à–ª–æ—Å—å –∑–∞—Å—É—á–∏—Ç—å —Ä—É–∫–∞–≤–∞ –∏ –¥–æ–∫–∞–∑—ã–≤–∞—Ç—å, —á—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ –Ω–∞ –Ω–∞—à–µ–π —Å—Ç–æ—Ä–æ–Ω–µ. –î–ª—è —ç—Ç–æ–≥–æ –±—ã–ª–æ —Ä–µ—à–µ–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–≤–∞ —Å–µ—Ä–≤–∏—Å–∞:¬†

- `ab-poligon`¬†c –º–µ—Ç–æ–¥–æ–º¬†`Ping`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –¥–µ–ª–∞–µ—Ç —Ä–æ–≤–Ω—ã–º —Å—á—ë—Ç–æ–º –Ω–∏—á–µ–≥–æ, –∫—Ä–æ–º–µ —Ç–æ–≥–æ —á—Ç–æ —Å—Ä–∞–∑—É –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç, —á—Ç–æ–±—ã –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –±—ã–ª–æ –ø—Ä–∏–¥—Ä–∞—Ç—å—Å—è –∫ –Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–º—É –∫–æ–¥—É;¬†
    
- `ab-shooter`, —á—Ç–æ–±—ã —Å—Ç—Ä–µ–ª—è—Ç—å –ø–æ –Ω–∞—à–µ–º—É —Å–µ—Ä–≤–∏—Å—É –ø–æ–ª–∏–≥–æ–Ω–∞ —Å –Ω—É–∂–Ω—ã–º RPS –∏ –∏–∑–º–µ—Ä—è—Ç—å –Ω—É–∂–Ω—ã–º –æ–±—Ä–∞–∑–æ–º —Å–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞ (–∑–∞–¥–∞–Ω–Ω—ã–º–∏ –±–∞–∫–µ—Ç–∞–º–∏ –≤ Prometheus). ¬†
    

–î–∞–ª–µ–µ –º—ã –¥–µ–ª–∞–ª–∏ —Ä—è–¥ —Å—Ç—Ä–µ–ª—å–± –∏–∑ shooter –∏ –∑–∞–º–µ—Ç–∏–ª–∏, —á—Ç–æ —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –¥–µ–ª–∞–µ—Ç —Ä–æ–≤–Ω—ã–º —Å—á—ë—Ç–æ–º –Ω–∏—á–µ–≥–æ –ø—Ä–∏ 1k RPS, –æ—Ç–≤–µ—á–∞–µ—Ç –≤ 4% –∑–∞–ø—Ä–æ—Å–∞—Ö –¥–æ–ª—å—à–µ 10 –º—Å –ø—Ä–∏ –ª—é–±–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–æ–¥–æ–≤, —Ç–∞–∫ –∂–µ, –∫–∞–∫ –∏ –º—ã.

Proof! üòé –¢–æ –µ—Å—Ç—å –º—ã –¥–æ–∫–∞–∑–∞–ª–∏, —á—Ç–æ¬†**–Ω–∏ –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å**¬†–Ω–µ –º–æ–∂–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –±—ã—Å—Ç—Ä–µ–µ¬†**10 –º—Å**¬†–ø–æ 96 –∫–≤–∞–Ω—Ç–∏–ª–∏, –¥–∞–∂–µ –Ω–µ –ø–æ 99.¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/d2b/d2e/a24/d2bd2ea246ba5552210d34cf5c195745.png)

–î–∞–ª–µ–µ –ø–æ—Å–ª–µ –æ–±—â–µ–Ω–∏—è —Å –∫–æ–º–∞–Ω–¥–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º—ã —Ä–µ—à–∏–ª–∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å¬†–≤ –Ω–∞—à –≤ –±—ç–∫–µ–Ω–¥¬†–º–∏–Ω—É—è Ingress Controller:¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/946/9ce/403/9469ce4036aca6af942d44630a216bd5.png)

–ú—ã —Å—Ç–∞–ª–∏ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã¬†–ø–æ IP –∏–∑ shooter –≤ –ø–æ–ª–∏–≥–æ–Ω –∏ —ç—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –Ω–∞—Å –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É:¬†**–≤–º–µ—Å—Ç–æ 4% –∑–∞–ø—Ä–æ—Å–æ–≤**, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–≤–µ—á–∞–ª–∏ –¥–æ–ª—å—à–µ 10 –º—Å,¬†**–∏—Ö —Å—Ç–∞–ª–æ –º–µ–Ω—å—à–µ 1%**. –ü–æ 0,9 –∫–≤–∞–Ω—Ç–∏–ª–∏ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ Ping —Å 5 –º—Å —É–º–µ–Ω—å—à–∏–ª–æ—Å—å –¥–æ 1 –º—Å, —Ç–æ –µ—Å—Ç—å¬†**–≤ –ø—è—Ç—å —Ä–∞–∑**, –∞ –ø–æ 0,99 ‚Äî –≤¬†**—Å–µ–º—å —Ä–∞–∑**.¬†¬†

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ¬†**–ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫**¬†gateway –ø–æ —Ç–∞–π–º-–∞—É—Ç—É —É–º–µ–Ω—å—à–∏–ª—Å—è —Å 4% –¥–æ 0,2% ‚Äî¬†—Ç–æ –µ—Å—Ç—å –≤¬†**20 —Ä–∞–∑**.¬†

–≠—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ —Å–∏—Å—Ç–µ–º–Ω–æ–º—É —Ä–µ—à–µ–Ω–∏—é –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–∞–Ω–∏–∏: —É–±—Ä–∞—Ç—å –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É –Ω–∞ —É—Ä–æ–≤–Ω–µ Ingress Controller –∏ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –µ—ë –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é —Å—Ç–æ—Ä–æ–Ω—É. –≠—Ç–æ –≤ —Ä–∞–∑—ã —É–º–µ–Ω—å—à–∏–ª–æ –≤—Ä–µ–º—è –Ω–∞ Round Trip –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –±—ç–∫–µ–Ω–¥–∞¬†**–≤—Å–µ–≥–æ Ozon**.¬†

–î–∞–ª–µ–µ –º—ã –∂–∏–ª–∏-–Ω–µ —Ç—É–∂–∏–ª–∏ —Ä–æ–≤–Ω–æ –≥–æ–¥, –∫–∞–∫ –∫ –Ω–∞–º –≤ –¥–≤–µ—Ä—å —Å–Ω–æ–≤–∞ –ø–æ—Å—Ç—É—á–∞–ª–æ—Å—å –¥–æ–ª–≥–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –∏ –º—ã —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å–æ —Å–ª–µ–¥—É—é—â–µ–π —Å–∏—Ç—É–∞—Ü–∏–µ–π.¬†

## –ü—Ä–æ–±–ª–µ–º–∞ —è–¥–µ—Ä —Å–µ—Ç–µ–≤—ã—Ö –∫–∞—Ä—Ç

–ú—ã –∑–∞–º–µ—Ç–∏–ª–∏, —á—Ç–æ –Ω–∞—à —Å–µ—Ä–≤–∏—Å –æ—Ç–≤–µ—á–∞–µ—Ç –¥–æ–ª—å—à–µ 40 –º—Å –ø–æ 99 –∫–≤–∞–Ω—Ç–∏–ª–∏, —á—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ, —É—á–∏—Ç—ã–≤–∞—è –Ω–∞—à—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É. –í—Å—ë –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–∫–µ, –∏ –ø—Ä–∏ —Ö–æ—Ä–æ—à–µ–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø–æ–¥–æ–≤ —Å–µ—Ä–≤–∏—Å –ø—Ä–æ—Å—Ç–æ –ø–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é –Ω–µ –º–æ–∂–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –¥–æ–ª–≥–æ. ¬†

–ú—ã –ø—Ä–∏—à–ª–∏ –∫ –∫–æ–º–∞–Ω–¥–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –∏—Å—Ç–æ—Ä–∏—è –ø–æ–≤—Ç–æ—Ä–∏–ª–∞—Å—å:¬†

> ¬´–í–∞—à –∫–æ–¥ ‚Äî¬†~~üí©~~¬†–Ω–µ –æ—á–µ–Ω—å, –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, —Å–º. –ø. 1¬ª.¬†

–ù–∞–º –ø—Ä–∏—à–ª–æ—Å—å —Ä–∞—Å—á–µ—Ö–ª–∏—Ç—å –Ω–∞—à–∏ shooter¬†—Å –ø–æ–ª–∏–≥–æ–Ω–æ–º, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∫–∞–∑–∞–ª–∏, —á—Ç–æ Round Trip –±–æ–ª—å—à–µ¬†**40 –º—Å**¬†–≤¬†**1,266%**¬†–æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞, –∫–æ—Ç–æ—Ä—ã–π —Ä–æ–≤–Ω—ã–º —Å—á—ë—Ç–æ–º –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç. –≠—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —á—Ç–æ –ø–æ¬†**99 –∫–≤–∞–Ω—Ç–∏–ª–∏**¬†—Å–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞¬†**–ª—é–±–æ–≥–æ¬†–±—ç–∫–µ–Ω–¥–∞**¬†–ø–æ –∞–ø—Ä–∏–æ—Ä–∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å¬†**–º–µ–Ω—å—à–µ 40 –º—Å**¬†–∏ –±–µ–∑—É—Å–ª–æ–≤–Ω–æ —ç—Ç–æ –∞—Ñ—Ñ–µ–∫—Ç–∏—Ç¬†**–≤–µ—Å—å Ozon.**

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/dca/8fe/dea/dca8fedea1ad98791ba442152267ab3f.png)

–î–∞–ª–µ–µ –º—ã –∑–∞–±–∏–ª–∏ –≤ –∫–æ–ª–æ–∫–æ–ª, —Å–æ–±—Ä–∞–ª–∏ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å–Ω—É—é –±–∞–∑—É, –ø–µ—Ä–µ–¥–∞–ª–∏ –≤—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã —Ä–µ–±—è—Ç–∞–º –∏–∑ –∫–æ–º–∞–Ω–¥—ã –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, –æ–Ω–∏ –≤–∑—è–ª–∏ –Ω–∞ –≤–æ–æ—Ä—É–∂–µ–Ω–∏–µ –Ω–∞—à —à—É—Ç–µ—Ä —Å –ø–æ–ª–∏–≥–æ–Ω–æ–º, —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–ª–∏ –ø—Ä–æ–±–ª–µ–º—É –∏ —Ä–µ—à–∏–ª–∏ –µ—ë. –≠—Ç–æ —Å–∏–ª—å–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–ª–æ —Å–∫–æ—Ä–æ—Å—Ç—å –≤—Å–µ–≥–æ Ozon. –ê —Ä–µ–±—è—Ç–∞ –Ω–∞–ø–∏—Å–∞–ª–∏¬†[–ø—Ä–µ–∫—Ä–∞—Å–Ω—É—é —Å—Ç–∞—Ç—å—é](https://habr.com/ru/company/ozontech/blog/662758/)¬†(—Ä–µ–∫–æ–º–µ–Ω–¥—É—é –∫ –ø—Ä–æ—á—Ç–µ–Ω–∏—é), –≤ –∫–æ—Ç–æ—Ä–æ–π –µ—Å—Ç—å –ø–∞—Å—Ö–∞–ª–æ—á–∫–∞ –æ –Ω–∞—à–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –ê/B-—Ç–µ—Å—Ç–æ–≤:¬†

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/6c1/8e3/5a2/6c18e35a2b3cc970492ed4fdc5439bf5.png)

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/5c9/a84/548/5c9a84548ac0f144c401e2501bbc0352.png)

–í–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫—É—é –∏–º–µ–Ω–Ω–æ —Å–∏—Å—Ç–µ–º—É –≤—ã —Å—Ç—Ä–æ–∏—Ç–µ:¬†  
  
‚Ä¢ –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ –æ–ø—ã—Ç–µ –Ω–∞—à–µ–≥–æ –ê—Ä–º–∞–≥–µ–¥–¥–æ–Ω–∞, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –∑–∞—Ä–∞–Ω–µ–µ —É—á–µ—Å—Ç—å –≤—Å–µ –Ω—é–∞–Ω—Å—ã –µ—ë –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏ –∏–º–µ—Ç—å –ø–µ—Ä–µ–¥ –≥–ª–∞–∑–∞–º–∏ –º–µ—Ç—Ä–∏–∫—É, –∫–æ—Ç–æ—Ä–∞—è –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏/—Ä–µ—Å—É—Ä—Å–æ–≤ –æ—Å—Ç–∞–ª–æ—Å—å –¥–æ –æ–≥–Ω—è –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ;¬†  
  
‚Ä¢ –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö¬†**–≤–æ—Å—å–º–∏**¬†–≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–∞—Ö (–º–æ–¥–∏—Ñ–∏—Ü–∏–∫–∞—Ü–∏—è—Ö) –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ê/B-—Ç–µ—Å—Ç–æ–≤, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –∏–∑–æ –≤—Å–µ—Ö —Å–∏–ª –±–æ—Ä–æ—Ç—å—Å—è –∑–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –¥–∞–∂–µ –µ—Å–ª–∏ –¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ —É–ø–æ—Ä–æ—Ç—å—Å—è –∏ –ø—Ä–∏–¥—É–º–∞—Ç—å –∫–∞–∫—É—é-—Ç–æ –º—É–ª—å–∫—É (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ ‚Äî —Å–≤–æ–π –±–∏–Ω–∞—Ä–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª —Å–∂–∞—Ç–∏—è –¥–∞–Ω–Ω—ã—Ö).¬†

–ï—Å–ª–∏ –≤—ã –±—É–¥–µ—Ç–µ —É–≤–µ—Ä–µ–Ω—ã –≤ –≤–∞—à–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, —Ç–æ —Å–º–æ–∂–µ—Ç–µ –¥–æ–∫–∞–∑–∞—Ç—å –ª—é–±–æ–π –∫–æ–º–∞–Ω–¥–µ, —á—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ –Ω–∞ –≤–∞—à–µ–π —Å—Ç–æ—Ä–æ–Ω–µ. –¢–µ–º —Å–∞–º—ã–º –ø–æ–º–æ—á—å –Ω–∞–π—Ç–∏ —Ä–µ–∞–ª—å–Ω—ã–π –±–∞—Ç–ª–Ω–µ–∫, –∏–∑–±–∞–≤–∏–≤—à–∏—Å—å –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ, –∫–æ–º–ø–∞–Ω–∏—è —Å–º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –±–æ–ª—å—à–æ–π –ø—Ä–æ—Ñ–∏—Ç, –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ ‚Äî —É–º–µ–Ω—å—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ Round Trip –ø–æ 99 –∫–≤–∞–Ω—Ç–∏–ª–∏¬†**–≤ —Å–µ–º—å —Ä–∞–∑**. ¬†

–ó–∞ —á–µ—Ç—ã—Ä–µ –≥–æ–¥–∞ –º—ã –ø—Ä–æ—à–ª–∏ –æ–≥—Ä–æ–º–Ω—ã–π –ø—É—Ç—å –æ—Ç –¥–≤—É—Ö –¥–æ 100 —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –≤ –º–µ—Å—è—Ü. –ú—ã –Ω–µ —Ä–∞–∑ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –Ω–∞—à—É –ø–ª–∞—Ç—Ñ–æ—Ä–º—É, –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ —Ä–µ—à–∞–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –≥–æ—Ä—è—â–µ–≥–æ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞, –º–µ–Ω—è–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –ø—Ä–∏–¥—É–º—ã–≤–∞–ª–∏ –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è. –•–æ—á—É —Å–∫–∞–∑–∞—Ç—å –±–æ–ª—å—à–æ–µ —Å–ø–∞—Å–∏–±–æ –≤—Å–µ–º –±—ç–∫–µ–Ω–¥–µ—Ä–∞–º, —Ç–∏–º–ª–∏–¥–∞–º, –ø—Ä–æ–¥—É–∫—Ç –æ—É–Ω–µ—Ä–∞–º, —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∞–º, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ—Ä–∞–º, –¥–∏–∑–∞–π–Ω–µ—Ä–∞–º, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –≤–ª–æ–∂–∏–ª–∏ —Å–≤–æ—é –¥—É—à—É –≤ –Ω–∞—à—É –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –ê/B-—Ç–µ—Å—Ç–æ–≤, –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –µ—ë –ø–∏–ª–∏—Ç—å –∏ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞—Ç—å. –¢–∞–∫–∂–µ –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–ø–∞—Å–∏–±–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É –∑–∞ –¥–æ–≤–µ—Ä–∏–µ –∏ –Ω–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–æ.¬†

–ù–∞—à–∞ –∫–æ–º–∞–Ω–¥–∞ –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ–º–∞–Ω–¥–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–º—É –ø—Ä–æ–¥—É–∫—Ç –æ—É–Ω–µ—Ä—É –∏ –Ω–∞—à–µ–º—É CTO¬†[@AntonStepanenko](https://habr.com/users/antonstepanenko)¬†–ø–∏–ª–∏—Ç –æ—á–µ–Ω—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ê/B-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –æ –∫–æ—Ç–æ—Ä—ã—Ö, –Ω–∞–¥–µ—é—Å—å, –º—ã —Ä–∞—Å—Å–∫–∞–∂–µ–º –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç–∞—Ç—å—è—Ö.